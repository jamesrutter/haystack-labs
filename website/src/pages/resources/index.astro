---
import Layout from "@/layouts/layout.astro";
import { getCollection } from "astro:content";

const resources = await getCollection("resources");
const sortedResources = resources.sort((a, b) =>
  a.data.title.localeCompare(b.data.title)
);
---

<Layout
  title="Resources - Haystack Labs"
  description="A collection of resources from Haystack Labs"
>
  <section class="section">
    <div class="wrapper">
      <h1 class="text-inverse">Resources</h1>
      <div class="grid grid--3col">
        {
          sortedResources.map((resource) => (
            <div class="card card--hover">
              <h3>
                <a href={`/resources/${resource.slug}`}>
                  {resource.data.title}
                </a>
              </h3>
              <p class="stat-label">{resource.data.type}</p>
              <p>{resource.data.description}</p>
              {resource.data.difficulty && (
                <p>
                  <strong>Difficulty:</strong> {resource.data.difficulty}
                </p>
              )}
              {resource.data.author && (
                <p>
                  <strong>Author:</strong> {resource.data.author}
                </p>
              )}
              {resource.data.tags && (
                <div>
                  <strong>Tags:</strong>
                  {resource.data.tags.map((tag) => (
                    <span style="background: var(--color-secondary); color: white; padding: 0.25rem 0.5rem; margin: 0.25rem; border-radius: 0.25rem; font-size: 0.8rem;">
                      {tag}
                    </span>
                  ))}
                </div>
              )}
            </div>
          ))
        }
      </div>
    </div>
  </section>
</Layout>
